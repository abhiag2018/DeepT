params {
  codeDir="/projects/li-lab/agarwa/CUBE/DeepTact/code"

  // options
  publish_dir_mode = 'copy'
  tracedir = "${projectDir}/pipeline_info"

  store_dir = "$codeDir/storeDir"

  //development mode
  dev = false
  // dev_lim_tar = 2
  // dev_lim_tar = 32000

  species=""
}


timeline {
  enabled = true
  file = "${params.tracedir}/execution_timeline.html"
}
report {
  enabled = true
  file = "${params.tracedir}/execution_report.html"
}
trace {
  enabled = true
  file = "${params.tracedir}/execution_trace.txt"
}
dag {
  enabled = true
  file = "${params.tracedir}/pipeline_dag.svg"
}

env {
    PYTHONPATH = "${projectDir}/bin:$PYTHONPATH"
}

profiles {

  standard {
    process.executor = 'local'
  }

  slurm{
    process {
      withLabel: 'bigCpuMem' {
        executor = 'slurm'
        memory = '700 GB'
        time = '3d'
        clusterOptions = '--qos batch --cpus-per-task 16'
        // shell = ['/bin/bash','-u']
      }
      withLabel: 'bigmem' {
        executor = 'slurm'
        memory = '700 GB'
        time = '3d'
        clusterOptions = '--qos batch'
        // shell = ['/bin/bash','-u']
      }
      withLabel: 'intense' {
        executor = 'slurm'
        memory = '500 GB'
        time = '3d'
        clusterOptions = '--qos batch --cpus-per-task 8'
        // shell = ['/bin/bash','-u']
      }
      withLabel: '!(intense|bigmem|bigCpuMem)' {
        executor = 'slurm'
        memory = '200 GB'
        time = '3d'
        clusterOptions = '--qos batch'
        // shell = ['/bin/bash','-u']
      }
    }
  }

}