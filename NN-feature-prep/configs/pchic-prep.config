params {
  dataDir="/projects/li-lab/agarwa/CUBE/DeepTact/dataset"

  // PCHi-C data processing options
  hic_input = "${params.dataDir}/PCHiC_data/PCHiC_peak_matrix_cutoff5.tsv"
  hic_dev = "${params.dataDir}/PCHiC_data/PCHiC_dev.tsv"
  hic_split_process = 10 // split hic tsv into <N> part for preprocessing
  hic_split_combine = 20 // split hic tsv into <N> part for preprocessing
  pos_threshold = 5
  neg_threshold = 0
  gtf_transcript_to_gene = "${params.dataDir}/gencode.v3c.annotation.GRCh37.gtf"
  pos_neg_interac_ratio = 20 //num of negative interactions created as a multiple of positive interactions
  hic_augment_factor = 20 //num of augmented interactions created as a multiple of total interactions
  cellTypes=['Mon', 'FoeT', 'nCD4','tCD4','tCD8','tB'] // cell types list for PCHiC data
  sepdata_split = 512
  // options
  outdir = "${projectDir}/output_dir"
  publish_dir_mode = 'copy'
  tracedir = "${params.outdir}/pipeline_info"

  store_dir = "${projectDir}/../storeDir"

  //development mode
  dev = false
  dev_lim_tar = 2
  // dev_lim_tar = 32000
}


timeline {
  enabled = true
  file = "${params.tracedir}/execution_timeline.html"
}
report {
  enabled = true
  file = "${params.tracedir}/execution_report.html"
}
trace {
  enabled = true
  file = "${params.tracedir}/execution_trace.txt"
}
dag {
  enabled = true
  file = "${params.tracedir}/pipeline_dag.svg"
}

env {
    PYTHONPATH = "${projectDir}/bin:$PYTHONPATH"
}

profiles {

  standard {
    process.executor = 'local'
  }

  slurm{
    process {
      withLabel: 'bigCpuMem' {
        executor = 'slurm'
        memory = '700 GB'
        time = '3d'
        clusterOptions = '--qos batch --cpus-per-task 16'
        // shell = ['/bin/bash','-u']
      }
      withLabel: 'bigmem' {
        executor = 'slurm'
        memory = '700 GB'
        time = '3d'
        clusterOptions = '--qos batch'
        // shell = ['/bin/bash','-u']
      }
      withLabel: 'intense' {
        executor = 'slurm'
        memory = '500 GB'
        time = '3d'
        clusterOptions = '--qos batch --cpus-per-task 8'
        // shell = ['/bin/bash','-u']
      }
      withLabel: '!(intense|bigmem|bigCpuMem)' {
        executor = 'slurm'
        memory = '200 GB'
        time = '12h'
        clusterOptions = '--qos batch'
        // shell = ['/bin/bash','-u']
      }
    }
  }

}